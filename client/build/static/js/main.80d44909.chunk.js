(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{202:function(e,t,n){},203:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),c=n.n(r),i=n(17),o=n.n(i),s=n(12),l=n(22),u=n(9),d=n.n(u),j=n(13),b=n(6),h=n(52),m=n(11),p=n.n(m),O=n(14),x=function(e,t){var n=Object(r.useState)(e),a=Object(b.a)(n,2),c=a[0],i=a[1];return Object(r.useEffect)((function(){i(e);var n=new Image;n.src=t,n.onload=function(){i(t)}}),[e,t]),[c,{blur:c===e}]},f=function(e){var t=e.photo,n=e.margin,c=e.index,i=x(t.urlSmall,t.urlMedium),o=Object(b.a)(i,2),l=o[0],u=o[1].blur,d=Object(r.useState)(!1),j=Object(b.a)(d,2),h=j[0],m=j[1];u||setTimeout((function(){m(!0)}),300);var p={backgroundColor:h?"#fff":"000",cursor:"pointer",overflow:"hidden",position:"relative"};return Object(a.jsx)(r.Fragment,{children:Object(a.jsx)(s.b,{to:"/index/".concat(c),children:Object(a.jsx)("div",{className:"container",style:Object(O.a)({margin:n,height:t.height,width:t.width},p),children:Object(a.jsx)("div",{className:"img-wrapper",children:Object(a.jsx)("img",{id:t._id,alt:t.description,src:l,width:t.width,height:t.height,style:h?{}:{filter:u?"blur(20px)":"none",transition:u?"none":"filter 0.3s ease-out"}})})})})})},g=function(){var e=Object(r.useState)([]),t=Object(b.a)(e,2),n=t[0],c=t[1],i=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get("/api/albums/name/default");case 3:(t=e.sent).data.photos.forEach((function(e){e.key=e.AWSFilename,e.src=e._id})),c(t.data.photos),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){i()}),[]);var o=Object(r.useCallback)((function(e){var t=e.index,n=e.left,r=e.top,c=e.key,i=e.photo;return Object(a.jsx)(f,{margin:"2px",index:t,photo:i,left:n,top:r},c)}),[]);return Object(a.jsx)("div",{children:Object(a.jsx)(h.a,{photos:n,renderImage:o,targetRowHeight:300})})},v=n(8),w=function(e){e?(p.a.defaults.headers.common["x-auth-token"]=e,localStorage.token=e):delete p.a.defaults.headers.common["x-auth-token"]},k=Object(r.createContext)(null),y={isAuthenticated:!1,isLoading:!0},C=function(){return Object(r.useContext)(k)},S=function(e){var t=Object(r.useState)(y),n=Object(b.a)(t,2),c=n[0],i=n[1],o=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.token){e.next=14;break}return e.prev=1,w(localStorage.token),e.next=5,p.a.get("/api/auth");case 5:i({isAuthenticated:!0,isLoading:!1}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0.response),i({isAuthenticated:!1,isLoading:!1});case 12:e.next=16;break;case 14:w(),i(Object(O.a)(Object(O.a)({},y),{},{isAuthenticated:!1,isLoading:!1}));case 16:window.addEventListener("storage",(function(){localStorage.token||i({isAuthenticated:!1,isLoading:!1})}));case 17:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){o()}),[]);var s=Object(r.useCallback)((function(){localStorage.removeItem("token"),w(),i(Object(O.a)(Object(O.a)({},c),{},{isAuthenticated:!1,isLoading:!1}))}),[c]),l=Object(r.useCallback)((function(){i(Object(O.a)(Object(O.a)({},c),{},{isAuthenticated:!0,isLoading:!1})),w(localStorage.token)}),[c]);localStorage.token&&w(localStorage.token);var u=Object(r.useMemo)((function(){return Object(O.a)(Object(O.a)({},c),{},{login:l,logout:s})}),[c,l,s]);return Object(a.jsx)(k.Provider,Object(O.a)({value:u},e))},A=n(119),N=n(250),E=n(148),P=n(274),L=n(248),T=n(142),D=n.n(T),I=n(245),B=Object(I.a)((function(e){var t,n,a;return{grow:{flexGrow:1,paddingBottom:5},title:(t={fontSize:"1.8rem"},Object(v.a)(t,e.breakpoints.down("xs"),{fontSize:"1.25rem"}),Object(v.a)(t,"@media (max-width:420px)",{fontSize:"1.05rem"}),Object(v.a)(t,"textDecoration","none"),Object(v.a)(t,"color",e.palette.text.primary),Object(v.a)(t,"fontWeight",300),t),headerSize:{minHeight:64,paddingLeft:0,paddingRight:0},sectionDesktop:(n={paddingLeft:"20px",display:"none"},Object(v.a)(n,e.breakpoints.up("md"),{display:"flex"}),Object(v.a)(n,"fontWeight",300),Object(v.a)(n,"textDecoration","none"),Object(v.a)(n,"color",e.palette.text.primary),n),sectionMobile:(a={display:"flex"},Object(v.a)(a,e.breakpoints.up("md"),{display:"none"}),Object(v.a)(a,"color",e.palette.text.primary),a)}})),F=function(){var e=B(),t=C(),n=Object(r.useState)(null),c=Object(b.a)(n,2),i=c[0],o=c[1],l=function(){o(null)},u=function(){t.logout()},d=Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)(A.a,{className:e.sectionDesktop,variant:"h6",component:s.b,to:"/",children:"HOME"}),Object(a.jsx)(A.a,{className:e.sectionDesktop,variant:"h6",component:s.b,to:"/portfolio",children:"PORTFOLIO"}),Object(a.jsx)(A.a,{className:e.sectionDesktop,variant:"h6",component:s.b,to:"/about",children:"ABOUT"}),t.isAuthenticated?Object(a.jsx)(A.a,{className:e.sectionDesktop,variant:"h6",component:s.b,to:"/",onClick:u,children:"LOGOUT"}):void 0]}),j=Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)("div",{children:Object(a.jsx)(L.a,{edge:"start",className:e.sectionMobile,"aria-label":"open drawer",onClick:function(e){o(e.currentTarget)},children:Object(a.jsx)(D.a,{})})}),Object(a.jsxs)(E.a,{id:"simple-menu",anchorEl:i,keepMounted:!0,open:Boolean(i),onClose:l,children:[Object(a.jsx)(P.a,{onClick:l,component:s.b,to:"/",children:"HOME"}),Object(a.jsx)(P.a,{onClick:l,component:s.b,to:"/portfolio",children:"PORTFOLIO"}),Object(a.jsx)(P.a,{onClick:l,component:s.b,to:"/about",children:"ABOUT"}),t.isAuthenticated?Object(a.jsx)(P.a,{onClick:u,component:s.b,to:"/login",children:"LOGOUT"}):void 0]})]});return Object(a.jsx)("div",{className:e.grow,id:"header",children:Object(a.jsxs)(N.a,{className:e.headerSize,children:[Object(a.jsx)(A.a,{className:e.title,variant:"h5",component:s.b,to:"/",children:"DYLAN MONTAGU PHOTOGRAPHY"}),Object(a.jsx)(s.b,{to:"/"}),Object(a.jsx)("div",{className:e.grow}),d,j]})})},R=function(e){var t=e.photos,n=e.GalleryElement,c=e.margin,i=e.targetRowHeight,o=Object(r.useCallback)((function(e){var t=e.index,r=e.left,i=e.top,o=e.key,s=e.photo;return Object(a.jsx)(n,{margin:c,index:t,photo:s,album:s,left:r,top:i},o)}),[c]);return Object(a.jsx)(r.Fragment,{children:Object(a.jsx)(h.a,{photos:t,renderImage:o,targetRowHeight:i})})},_=function(e){var t=e.photo,n=e.onClick,c=e.margin,i=e.children,o=Object(r.useState)(!1),s=Object(b.a)(o,2),l=s[0],u=s[1],d=x(t.urlSmall,t.urlMedium),j=Object(b.a)(d,2),h=j[0],m=j[1].blur;m||setTimeout((function(){u(!0)}),300);var p={backgroundColor:l?"#fff":"000",cursor:"pointer",overflow:"hidden",position:"relative"};return Object(a.jsx)("div",{className:"container",style:Object(O.a)({margin:c,height:t.height,width:t.width},p),children:Object(a.jsxs)("div",{className:"img-wrapper",children:[Object(a.jsx)("img",{onClick:n,id:t._id,alt:t.description,src:h,width:t.width,height:t.height,style:l?{}:{filter:m?"blur(20px)":"none",transition:m?"none":"filter 0.3s ease-out"}}),i]})})},M=n(267),H=function(e){var t=e.album,n=e.margin;return Object(a.jsx)(r.Fragment,{children:Object(a.jsx)(s.b,{to:"/album/".concat(t._id),children:Object(a.jsx)(_,{photo:t,margin:n,children:Object(a.jsx)(M.a,{className:"middle",children:Object(a.jsx)(A.a,{variant:"h6",className:"text",children:t.name})})})})})},U=function(){var e=Object(r.useState)([]),t=Object(b.a)(e,2),n=t[0],c=t[1],i=function(){var e=Object(j.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get("/api/library/name/default");case 3:t=e.sent,n=t.data.albums.map((function(e){e.key=e._id,e.src=e._id;try{e.height=e.thumbnailPhoto.height,e.width=e.thumbnailPhoto.width,e.urlSmall=e.thumbnailPhoto.urlSmall,e.urlMedium=e.thumbnailPhoto.urlMedium}catch(t){e.height=300,e.width=400,e.urlSmall="",e.urlMedium=""}return e})),c(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){i()}),[]),Object(a.jsx)("div",{children:Object(a.jsx)(R,{photos:n,GalleryElement:H,margin:"2px",targetRowHeight:500})})},W=function(e){var t=e.photo,n=e.margin;return Object(a.jsx)(r.Fragment,{children:Object(a.jsx)(s.b,{to:"/album/".concat(t.parentAlbumId,"/").concat(t.indexInAlbum),children:Object(a.jsx)(_,{photo:t,margin:n})})})},z=Object(I.a)((function(e){var t;return{albumTitle:(t={},Object(v.a)(t,e.breakpoints.down("xs"),{fontSize:"1.00rem"}),Object(v.a)(t,"fontWeight",300),Object(v.a)(t,"paddingBottom",10),t)}})),V=function(e){var t=e.match,n=z(),c=Object(r.useState)([]),i=Object(b.a)(c,2),o=i[0],s=i[1],l=Object(r.useState)({}),u=Object(b.a)(l,2),h=u[0],m=u[1],O=Object(r.useState)(!1),x=Object(b.a)(O,2),f=x[0],g=x[1],v=function(){var e=Object(j.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/api/albums/"+t);case 2:n=e.sent,a=n.data.photos.length,n.data.photos.forEach((function(e,n){e.key=e.AWSFilename,e.parentAlbumId=t,e.indexInAlbum=n,e.albumLength=a,e.src=e._id})),s(n.data.photos),m(n.data),g(!0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){var e=t.params.id;v(e)}),[t.params.id]),Object(a.jsxs)("div",{children:[Object(a.jsx)(A.a,{className:n.albumTitle,align:"center",variant:"h5",children:f?h.name.toUpperCase():""}),Object(a.jsx)(R,{photos:o,GalleryElement:W,margin:"2px",targetRowHeight:500})]})},G=n(118),Y=n.n(G),q=n(117),J=n.n(q),K=function(e){var t=e.match,n=e.index,r=e.photo,c=e.previousLink,i=e.nextLink;return Object(a.jsxs)("div",{align:"center",id:"navigation-buttons",className:"navigation",children:[Object(a.jsx)(s.b,{to:c,style:t.params.index<=0?{pointerEvents:"none"}:{},children:n<=0?Object(a.jsx)(L.a,{disabled:!0,children:Object(a.jsx)(J.a,{})}):Object(a.jsx)(L.a,{children:Object(a.jsx)(J.a,{})})}),Object(a.jsx)(s.b,{to:i,style:t.params.index>=r.nPhotos-1?{pointerEvents:"none"}:{},children:n>=r.nPhotos-1?Object(a.jsx)(L.a,{disabled:!0,children:Object(a.jsx)(Y.a,{})}):Object(a.jsx)(L.a,{children:Object(a.jsx)(Y.a,{})})})]})},Q=Object(I.a)((function(e){var t;return{photoDescription:(t={fontSize:"1.6rem"},Object(v.a)(t,e.breakpoints.down("xs"),{fontSize:"1.05rem"}),Object(v.a)(t,"@media (max-width:420px)",{fontSize:"0.85rem"}),Object(v.a)(t,"bottom","0%"),Object(v.a)(t,"padding","10px"),t)}})),X=function(e){var t=e.match,n=e.photo,c=e.index,i=e.previousLink,o=e.nextLink,l=e.enterLink,u=Object(r.useState)(0),d=Object(b.a)(u,2),j=d[0],h=d[1],m=x(n.urlSmall,n.urlMedium),p=Object(b.a)(m,2),O=p[0],f=p[1].blur;Object(r.useEffect)((function(){h(document.getElementById("header").offsetHeight+document.getElementById("photo-description").offsetHeight+document.getElementById("navigation-buttons").offsetHeight)}),[]);var g=Q();return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:Object(a.jsx)(s.b,{to:l,children:Object(a.jsx)("div",{children:Object(a.jsx)("img",{style:{width:"100%",maxHeight:.95*window.innerHeight-j,objectFit:"contain",filter:f?"blur(20px)":"none",transition:f?"none":"filter 0.3s ease-out",paddingTop:10},alt:"temp",src:O})})})}),Object(a.jsx)(A.a,{id:"photo-description",className:g.photoDescription,align:"center",variant:"body2"}),Object(a.jsx)(K,{match:t,index:c,photo:n,previousLink:i,nextLink:o})]})},Z=function(e){e.props;var t=e.match,n=Object(l.g)(),c=Object(r.useState)({}),i=Object(b.a)(c,2),o=i[0],s=i[1],u=Object(r.useState)(0),h=Object(b.a)(u,2),m=h[0],O=h[1],x="/album/".concat(t.params.id,"/").concat((parseInt(t.params.index)-1).toString()),f="/album/".concat(t.params.id,"/").concat((parseInt(t.params.index)+1).toString()),g="/album/".concat(t.params.id),v=function(){var e=Object(j.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/api/albums/"+t+"/index/"+n);case 2:a=e.sent,s(a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return document.onkeydown=function(e){"ArrowLeft"===(e=e||window.event).key&&m>0?n.push(x):"ArrowRight"===e.key&&m<o.nPhotos-1?n.push(f):"Enter"===e.key&&n.push(g)},Object(r.useEffect)((function(){return function(){document.onkeydown=null}}),[]),Object(r.useEffect)((function(){var e=t.params.id;O(t.params.index);var n=t.params.index;v(e,n)}),[t.params.index,t.params.id]),Object(a.jsx)("div",{children:Object(a.jsx)(X,{match:t,photo:o,index:m,previousLink:x,nextLink:f,enterLink:g})})},$=function(e){var t=e.match,n=Object(l.g)(),c=Object(r.useState)({}),i=Object(b.a)(c,2),o=i[0],s=i[1],u=Object(r.useState)(0),h=Object(b.a)(u,2),m=h[0],O=h[1],x="/index/".concat((parseInt(t.params.index)-1).toString()),f="/index/".concat((parseInt(t.params.index)+1).toString()),g=function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(t),e.next=3,p.a.get("/api/albums/name/default/"+t);case 3:n=e.sent,s(n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return document.onkeydown=function(e){"ArrowLeft"===(e=e||window.event).key&&m>0?n.push(x):"ArrowRight"===e.key&&m<o.nPhotos-1?n.push(f):"Enter"===e.key&&n.push("/")},Object(r.useEffect)((function(){return function(){document.onkeydown=null}}),[]),Object(r.useEffect)((function(){g(t.params.index)}),[t.params.index,t.params.id]),Object(a.jsx)("div",{children:Object(a.jsx)(X,{match:t,photo:o,index:m,previousLink:x,nextLink:f,enterLink:"/"})})},ee=Object(I.a)((function(e){var t;return{sectionTitles:(t={},Object(v.a)(t,e.breakpoints.down("xs"),{fontSize:"1.00rem"}),Object(v.a)(t,"fontWeight",300),t),bodyText:Object(v.a)({},e.breakpoints.down("xs"),{fontSize:"0.95rem"}),imgContainer:{width:"70%",paddingBottom:"35%",position:"relative",minWidth:"10%",marginLeft:"auto",marginRight:"auto",marginTop:"10px",marginBottom:"20px"},imgContent:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}}})),te=function(){var e=ee();return Object(a.jsxs)("div",{children:[Object(a.jsx)(A.a,{className:e.sectionTitles,align:"center",variant:"h5",children:"ABOUT ME"}),Object(a.jsx)("div",{className:e.imgContainer,children:Object(a.jsx)("img",{className:e.imgContent,src:"http://d1k5un5jfu3q7.cloudfront.net/static/about_me.jpg",alt:""})}),Object(a.jsx)(A.a,{className:e.bodyText,variant:"body1",children:"I currently live in the town of Middlebury, Vermont where I work remotely as a Software Engineer. In my free time, I like to take full advantage of the beautiful nature in the area and often find myself in the Green Mountains, Lack Champlain, and Adirondack Mountains."})]})},ne=function(e){var t=e.album,n=e.margin;return Object(a.jsx)(r.Fragment,{children:Object(a.jsx)(s.b,{to:"/admin/album/".concat(t._id),children:Object(a.jsx)(_,{photo:t,margin:n,children:Object(a.jsx)(M.a,{className:"middle",children:Object(a.jsx)(A.a,{variant:"h6",className:"text",children:t.name})})})})})},ae=n(72),re=function(e,t,n){return function(e,t,n){var a=n<0?e.length+n:n,r=e.splice(t,1)[0];e.splice(a,0,r)}(e=e.slice(),t,n),e},ce=function(e){var t=e.photo,n=e.margin;return Object(a.jsx)(s.b,{to:"/admin/album/".concat(t._id),children:Object(a.jsx)("div",{children:Object(a.jsx)(_,{photo:t,margin:n,children:Object(a.jsx)(M.a,{className:"middle",children:Object(a.jsx)(A.a,{variant:"h6",className:"text",children:t.name})})})})})},ie=Object(ae.SortableElement)((function(e){return e.photo.removePhotoFromView=e.removePhotoFromView,Object(a.jsx)(ce,Object(O.a)({},e))})),oe=Object(ae.SortableContainer)((function(e){var t=e.items,n=e.removePhotoFromView;return Object(a.jsx)(h.a,{photos:t,targetRowHeight:150,renderImage:function(e){return Object(a.jsx)(ie,Object(O.a)(Object(O.a)({},e),{},{removePhotoFromView:n}))}})})),se=function(e){var t=e.albums,n=e.setAlbums;return Object(a.jsx)("div",{children:Object(a.jsx)(oe,{removePhotoFromView:function(e){n(t.filter((function(t){return!(t._id===e)})))},items:t,onSortEnd:function(e){var a=e.oldIndex,r=e.newIndex;n(re(t,a,r))},axis:"xy"})})},le=Object(r.createContext)(null),ue={isOpen:!1,alertType:"",msg:""},de=function(){return Object(r.useContext)(le)},je=function(e){var t=Object(r.useState)(ue),n=Object(b.a)(t,2),c=n[0],i=n[1],o=function(){i(Object(O.a)(Object(O.a)({},le),{},{isOpen:!1}))},s=function(e,t){i({isOpen:!0,alertType:e,msg:t})},l=Object(r.useMemo)((function(){return Object(O.a)(Object(O.a)({},c),{},{closeAlert:o,openAlert:s})}),[c,o,s]);return Object(a.jsx)(le.Provider,Object(O.a)({value:l},e))},be=n(258),he=n(275),me=n(271),pe=n(257),Oe=n(252),xe=n(253),fe=n(251),ge=function(e){var t=e.createAlbumDialogOpen,n=e.closeCreateAlbumDialog,r=e.setNewAlbumName,c=e.createNewAlbum;return Object(a.jsxs)(me.a,{open:t,onClose:n,"aria-labelledby":"form-dialog-title",maxWidth:"lg",children:[Object(a.jsx)(fe.a,{style:{width:"300px"},id:"form-dialog-title",children:"Create a new Album"}),Object(a.jsxs)(Oe.a,{children:[Object(a.jsx)(xe.a,{children:"Album Name: "}),Object(a.jsx)(he.a,{onChange:function(e){return r(e.target.value)},autoFocus:!0,margin:"dense",id:"name",label:"",fullWidth:!0})]}),Object(a.jsxs)(pe.a,{children:[Object(a.jsx)(be.a,{onClick:n,color:"primary",children:"Cancel"}),Object(a.jsx)(be.a,{onClick:c,color:"primary",children:"Confirm"})]})]})},ve=Object(I.a)((function(e){var t;return{sectionTitles:(t={},Object(v.a)(t,e.breakpoints.down("xs"),{fontSize:"1.25rem"}),Object(v.a)(t,"fontWeight",300),Object(v.a)(t,"paddingTop",20),t),editButton:{marginRight:10,marginBottom:10}}})),we=function(){var e=ve(),t=de(),n=Object(r.useState)([]),c=Object(b.a)(n,2),i=c[0],o=c[1],u=Object(r.useState)([]),h=Object(b.a)(u,2),m=h[0],O=h[1],x=Object(r.useState)({thumbnailPhoto:{_id:""}}),f=Object(b.a)(x,2),g=f[0],v=f[1],w=Object(r.useState)([]),k=Object(b.a)(w,2),y=k[0],C=k[1],S=Object(r.useState)(""),N=Object(b.a)(S,2),E=N[0],P=N[1],L=Object(r.useState)(!1),T=Object(b.a)(L,2),D=T[0],I=T[1],B=Object(r.useState)(),F=Object(b.a)(B,2),M=F[0],H=F[1];de().isAuthenticated||l.a;var U=function(){I(!1)},W=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.post("/api/albums/",{name:E});case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0),t.openAlert("Error creating new album",e.t0.response.data.msg);case 9:Y(),U();case 11:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get("/api/albums/name/default");case 3:(t=e.sent).data.thumbnailPhoto._id=t.data._id,t.data.thumbnailPhoto.name="default",v(t.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/api/library/name/default");case 2:t=e.sent,H(t.data._id);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(j.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.map((function(e){return e._id})),e.prev=1,e.next=4,p.a.patch("/api/library/".concat(M),{albums:n});case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),t.openAlert("Error updating album arrangement",e.t0.response.data.msg),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(j.a)(d.a.mark((function e(){var t,n,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get("/api/library/name/default");case 3:return t=e.sent,n=t.data.albums.map((function(e){e.src=e._id;try{e.height=e.thumbnailPhoto.height,e.width=e.thumbnailPhoto.width,e.urlSmall=e.thumbnailPhoto.urlSmall,e.urlMedium=e.thumbnailPhoto.urlMedium}catch(t){e.height=300,e.width=400,e.urlSmall="",e.urlMedium=""}return e})),o(n),e.next=8,p.a.get("/api/albums");case 8:a=e.sent,r=a.data.filter((function(e){return"default"!==e.name})).filter((function(e){return!t.data.albums.filter((function(t){return t._id===e._id})).length>0})).map((function(e){e.src=e._id;try{e.height=e.thumbnailPhoto.height,e.width=e.thumbnailPhoto.width,e.urlSmall=e.thumbnailPhoto.urlSmall,e.urlMedium=e.thumbnailPhoto.urlMedium}catch(t){e.height=300,e.width=400,e.urlSmall="",e.urlMedium=""}return e})),O(r),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get("/api/photos?limit=30");case 3:(t=e.sent).data.forEach((function(e){e.key=e._id,e.src=e._id})),C(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0.response);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){Y(),q(),z(),V()}),[]),Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)(A.a,{align:"center",variant:"h5",className:e.sectionTitles,children:"ADMIN CONSOLE"}),Object(a.jsx)(A.a,{variant:"h6",className:e.sectionTitles,children:"EDIT ALL PHOTOS"}),Object(a.jsx)(s.b,{to:"/admin/photos",children:Object(a.jsx)(R,{photos:y,GalleryElement:_,margin:"1px",targetRowHeight:40})}),Object(a.jsx)(A.a,{variant:"h6",className:e.sectionTitles,children:"EDIT DEFAULT ALBUM"}),Object(a.jsx)(ne,{album:g.thumbnailPhoto}),Object(a.jsx)(A.a,{variant:"h6",className:e.sectionTitles,children:"EDIT AND REORDER ALBUMS IN LIBRARY"}),Object(a.jsxs)("div",{children:[Object(a.jsx)(be.a,{className:e.editButton,variant:"outlined",onClick:function(){I(!0)},children:"Create new album"}),Object(a.jsx)(be.a,{className:e.editButton,variant:"outlined",onClick:G,children:"Confirm album arrangement"}),Object(a.jsx)(ge,{createAlbumDialogOpen:D,closeCreateAlbumDialog:U,setNewAlbumName:P,createNewAlbum:W})]}),Object(a.jsx)(se,{albums:i,setAlbums:o}),Object(a.jsx)(A.a,{variant:"h6",className:e.sectionTitles,children:"EDIT ALBUMS NOT IN LIBRARY"}),Object(a.jsx)(R,{photos:m,GalleryElement:ne,margin:"2px",targetRowHeight:50})]})},ke=function(e){var t=e.photo,n=e.open,c=e.handleClose,i=e.src,o=e.setThumbnailPhoto,l=e.thumbnailPhotoUpdated,u=e.removePhotoFromAlbum;return Object(a.jsx)(r.Fragment,{children:Object(a.jsxs)(me.a,{open:n,onClose:c,maxWidth:"md",children:[Object(a.jsxs)(fe.a,{children:["Selected Photo: ",t.name]}),Object(a.jsx)("img",{src:i,style:{height:250,width:t.width/t.height*250,padding:"20px"},alt:t.description}),Object(a.jsxs)(Oe.a,{children:[Object(a.jsx)(be.a,{variant:"outlined",onClick:o,children:"Set as album thumbnail photo"})," ",Object(a.jsx)(A.a,{color:"primary",children:l&&"Thumbnail Photo Updated"})]}),Object(a.jsx)(Oe.a,{children:Object(a.jsx)(be.a,{variant:"outlined",onClick:function(){window.confirm("Are you sure you wish to delete this item?")&&u()},children:"Remove photo from album"})}),Object(a.jsx)(Oe.a,{children:Object(a.jsx)(be.a,{variant:"outlined",component:s.b,to:"/admin/photos/".concat(t._id),children:"Edit photo"})}),Object(a.jsx)(pe.a,{children:Object(a.jsx)(be.a,{variant:"text",onClick:c,children:"Close"})})]})})},ye=function(e){var t=e.photo,n=e.margin,i=Object(l.g)(),o=x(t.urlSmall,t.urlMedium),s=Object(b.a)(o,1)[0],u=Object(r.useState)(!1),h=Object(b.a)(u,2),m=h[0],O=h[1],f=c.a.useState(!1),g=Object(b.a)(f,2),v=g[0],w=g[1],k=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.removePhotoFromView(t._id),e.prev=1,e.next=4,p.a.delete("/api/albums/".concat(t.parentAlbumId,"/").concat(t._id));case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0),alert("Photo was unable to be removed from album");case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{p.a.patch("/api/albums/".concat(t.parentAlbumId),{thumbnailPhoto:t._id}),O(!0),setTimeout((function(){return O(!1)}),2e3)}catch(n){console.error(n)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)(_,{photo:t,onClick:function(){return w(!0)},margin:n}),Object(a.jsx)(ke,{photo:t,open:v,handleClose:function(){return w(!1)},src:s,history:i,setThumbnailPhoto:y,thumbnailPhotoUpdated:m,removePhotoFromAlbum:k})]})},Ce=Object(ae.SortableElement)((function(e){return e.photo.removePhotoFromView=e.removePhotoFromView,Object(a.jsx)(ye,Object(O.a)({},e))})),Se=Object(ae.SortableContainer)((function(e){var t=e.items,n=e.removePhotoFromView;return Object(a.jsx)(h.a,{photos:t,targetRowHeight:150,renderImage:function(e){return Object(a.jsx)(Ce,Object(O.a)(Object(O.a)({},e),{},{removePhotoFromView:n}))}})})),Ae=function(e){var t=e.photos,n=e.setPhotos;return Object(a.jsx)("div",{children:Object(a.jsx)(Se,{removePhotoFromView:function(e){n(t.filter((function(t){return!(t._id===e)})))},items:t,onSortEnd:function(e){var a=e.oldIndex,r=e.newIndex;n(re(t,a,r))},axis:"xy"})})},Ne=n(65),Ee=n(103),Pe=n(106);function Le(){var e=Object(Ne.a)(["\n  width: 200px;\n  margin-bottom: 1px;\n  // padding: 1px;\n"]);return Le=function(){return e},e}var Te=Ee.a.div(Le());function De(e){var t=e.photo,n=e.index;return Object(a.jsx)(Pe.b,{draggableId:t._id,index:n,children:function(e){return Object(a.jsx)(Te,Object(O.a)(Object(O.a)(Object(O.a)({ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{children:Object(a.jsx)("img",{src:t.urlMedium,width:t.listWidth,height:t.listHeight,alt:t.description})}))}})}var Ie=function(e){var t=e.photos,n=e.setPhotos;return Object(a.jsx)(r.Fragment,{children:Object(a.jsx)(Pe.a,{onDragEnd:function(e){if(e.destination&&e.destination.index!==e.source.index){var a=re(t,e.source.index,e.destination.index);n(a)}},children:Object(a.jsx)(Pe.c,{droppableId:"list",children:function(e){return Object(a.jsxs)("div",Object(O.a)(Object(O.a)({ref:e.innerRef},e.droppableProps),{},{children:[t.map((function(e,t){return Object(a.jsx)(De,{photo:e,index:t},e._id)})),e.placeholder]}))}})})})},Be=n(272),Fe=n(266),Re=n(273),_e=function(e){var t=e.album,n=e.setUpdatedAlbumName,r=e.handleUpdateAlbumName,c=e.changeAlbumNameOpen,i=e.handleChangeAlbumNameClickClose;return Object(a.jsx)("div",{children:Object(a.jsxs)(me.a,{open:c,onClose:i,"aria-labelledby":"form-dialog-title",children:[Object(a.jsx)(fe.a,{id:"form-dialog-title",children:"Change album name: ".concat(t.name)}),Object(a.jsxs)(Oe.a,{children:[Object(a.jsx)(xe.a,{children:"Enter the new name you'd like to call this album."}),Object(a.jsx)(he.a,{autoFocus:!0,margin:"dense",id:"name",label:"Album Name",fullWidth:!0,onChange:function(e){return n(e.target.value)}})]}),Object(a.jsxs)(pe.a,{children:[Object(a.jsx)(be.a,{onClick:i,children:"Cancel"}),Object(a.jsx)(be.a,{onClick:r,children:"Confirm"})]})]})})},Me=function(e){var t=e.album,n=e.open,r=e.handleClose,c=e.deleteAlbum;return Object(a.jsxs)(me.a,{open:n,onClose:r,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(fe.a,{id:"alert-dialog-title",children:"Delete Album: ".concat(t.name)}),Object(a.jsx)(Oe.a,{children:Object(a.jsx)(xe.a,{id:"alert-dialog-description",children:"Are you sure you want to delete this album? Uploaded photos will be unaffected"})}),Object(a.jsxs)(pe.a,{children:[Object(a.jsx)(be.a,{onClick:r,color:"primary",children:"Cancel"}),Object(a.jsx)(be.a,{onClick:c,color:"error",autoFocus:!0,children:"Delete Album"})]})]})},He=Object(I.a)((function(e){return{toggleButton:{backgroundColor:e.palette.primary[50],marginBottom:"20px",color:e.palette.primary[50]},editButton:{marginTop:10}}})),Ue=function(e){var t=e.match,n=He(),c=Object(l.g)(),i=de(),o=Object(r.useState)("grid"),u=Object(b.a)(o,2),h=u[0],m=u[1],O=Object(r.useState)([]),x=Object(b.a)(O,2),f=x[0],g=x[1],v=Object(r.useState)({}),w=Object(b.a)(v,2),k=w[0],y=w[1],C=Object(r.useState)(!1),S=Object(b.a)(C,2),N=S[0],E=S[1],P=Object(r.useState)(""),L=Object(b.a)(P,2),T=L[0],D=L[1],I=Object(r.useState)(!1),B=Object(b.a)(I,2),F=B[0],R=B[1],_=Object(r.useState)(!1),M=Object(b.a)(_,2),H=M[0],U=M[1],W=Object(r.useState)(!1),z=Object(b.a)(W,2),V=z[0],G=z[1],Y=Object(r.useState)(),q=Object(b.a)(Y,2),J=q[0],K=q[1],Q=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.put("/api/library/".concat(J,"/").concat(t.params.id));case 3:G(!0),ee(t.params.id),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),i.openAlert("Error adding album to library",e.t0.response.data.msg),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.delete("/api/library/".concat(J,"/").concat(t.params.id));case 3:G(!1),ee(t.params.id),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),i.openAlert("Error removing album from library",e.t0.response.data.msg),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Z=function(){U(!1)},$=function(){R(!1)},ee=function(){var e=Object(j.a)(d.a.mark((function e(t){var n,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/api/albums/"+t);case 2:return n=e.sent,a=n.data.photos.length,n.data.photos.forEach((function(e,n){e.key=e.AWSFilename,e.parentAlbumId=t,e.indexInAlbum=n,e.albumLength=a,e.listWidth=e.width,e.listHeight=e.height,e.src=e._id})),g(n.data.photos),y(n.data),e.next=9,p.a.get("/api/library/name/default");case 9:r=e.sent,K(r.data._id),!r.data.albums.filter((function(e){return e._id===t})).length>0?G(!0):G(!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){var e=t.params.id;ee(e)}),[t.params.id,V]);var te=function(){var e=Object(j.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.map((function(e){return e._id})),e.prev=1,e.next=4,p.a.patch("/api/albums/".concat(t.params.id),{photos:n});case 4:E(!0),setTimeout((function(){return E(!1)}),2e3),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0),i.openAlert("Error confirming photo arrangement",e.t0.response.data.msg);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.patch("/api/albums/".concat(t.params.id),{name:T});case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),i.openAlert("Error changing albums name",e.t0.response.data.msg),console.error(e.t0);case 9:ee(t.params.id),Z();case 11:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),ae=function(){return Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)(be.a,{variant:"outlined",className:n.editButton,onClick:te,children:"Confirm Photo Arrangement"}),Object(a.jsx)(A.a,{children:N&&"Arrangement Updated"})]})},re=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.delete("/api/albums/".concat(t.params.id));case 3:c.push("/admin/"),e.next=11;break;case 6:e.prev=6,e.t0=e.catch(0),i.openAlert("Error deleting this album",e.t0.response.data.msg),console.log(e.t0.response),$();case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)(A.a,{align:"center",variant:"h4",style:{padding:"20px"},children:k.name}),Object(a.jsx)(be.a,{variant:"outlined",component:s.b,to:"/admin",children:"<- Back to Admin Console"}),Object(a.jsx)(Be.a,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:Object(a.jsxs)(Re.a,{className:n.toggleButton,color:"primary",value:h,exclusive:!0,onChange:function(e,t){null!==t&&m(t)},size:"small",children:[Object(a.jsx)(Fe.a,{value:"grid",children:"Grid"}),Object(a.jsx)(Fe.a,{value:"list",children:"List"})]})}),"grid"===h?Object(a.jsx)(Ae,{photos:f,setPhotos:g,getPhotos:ee}):Object(a.jsx)(Be.a,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:Object(a.jsx)(Ie,{photos:f,setPhotos:g})}),Object(a.jsx)(ae,{}),Object(a.jsx)("div",{children:V?Object(a.jsx)(be.a,{className:n.editButton,variant:"outlined",onClick:Q,children:"Add Album to Library"}):Object(a.jsx)(be.a,{className:n.editButton,variant:"outlined",onClick:X,children:"Remove Album from Library"})}),Object(a.jsx)(be.a,{className:n.editButton,variant:"outlined",onClick:function(){U(!0)},children:"Change Album Name"}),Object(a.jsx)(_e,{album:k,setUpdatedAlbumName:D,handleUpdateAlbumName:ne,changeAlbumNameOpen:H,handleChangeAlbumNameClickClose:Z}),Object(a.jsxs)("div",{children:[Object(a.jsx)(be.a,{className:n.editButton,variant:"outlined",color:"secondary",onClick:function(){R(!0)},children:"Delete Album"}),Object(a.jsx)(Me,{album:k,open:F,handleClose:$,deleteAlbum:re})]})]})},We=function(e){var t=e.photo,n=e.margin;return Object(a.jsx)(r.Fragment,{children:Object(a.jsx)(s.b,{to:"/admin/photos/".concat(t._id),children:Object(a.jsx)(_,{photo:t,margin:n})})})},ze=Object(I.a)((function(e){var t;return{sectionDesktop:(t={paddingLeft:"20px"},Object(v.a)(t,e.breakpoints.down("xs"),{fontSize:"1.25rem"}),Object(v.a)(t,"@media (max-width:420px)",{fontSize:"1.05rem"}),Object(v.a)(t,"fontWeight",400),Object(v.a)(t,"color",e.palette.primary[50]),t),editButton:{marginRight:10,marginBottom:10}}})),Ve=function(){var e=Object(r.useRef)(null),t=de(),n=ze(),c=Object(r.useState)([]),i=Object(b.a)(c,2),o=i[0],l=i[1],u=Object(r.useState)(),h=Object(b.a)(u,2),m=h[0],O=h[1],x=Object(r.useState)(),f=Object(b.a)(x,2),g=f[0],v=f[1],w=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get("/api/photos");case 3:(t=e.sent).data.forEach((function(e){e.src=e._id})),l(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){w()}),[]),Object(r.useEffect)((function(){if(m){var e=URL.createObjectURL(m);return v(e),function(){return URL.revokeObjectURL(e)}}v(void 0)}),[m]);var k=function(){var n=Object(j.a)(d.a.mark((function n(){var a,r;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(a=new FormData).append("image",e.current.files[0]),r={headers:{accept:"application/json","Accept-Language":"en-US,en;q=0.8","Content-Type":"multipart/form-data; boundary=".concat(a._boundary)}},n.prev=3,n.next=6,p.a.post("/api/photos",a,r);case 6:w(),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(3),t.openAlert("Error Uploading Photo",n.t0.response.data.msg),console.error(n.t0);case 13:case"end":return n.stop()}}),n,null,[[3,9]])})));return function(){return n.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[Object(a.jsx)(be.a,{className:n.editButton,style:{marginBottom:30},variant:"outlined",component:s.b,to:"/admin",children:"<- Back to Admin Console"}),Object(a.jsxs)("div",{children:[Object(a.jsxs)(be.a,{className:n.editButton,variant:"outlined",component:"label",children:["Choose File",Object(a.jsx)("input",{id:"files",type:"file",hidden:!0,onChange:function(e){return O(e.target.files[0])},ref:e})]}),m&&Object(a.jsx)("img",{src:g,width:"200",height:"auto",alt:m.name})]}),Object(a.jsx)("div",{children:m?Object(a.jsx)(A.a,{color:"primary",children:m.name}):void 0}),Object(a.jsx)(be.a,{className:n.editButton,variant:"outlined",onClick:k,children:"CONFIRM UPLOAD"}),Object(a.jsx)(R,{photos:o,GalleryElement:We,margin:"2px",targetRowHeight:100})]})},Ge=function(e){var t=e.deletePhotoDialogisOpen,n=e.handleDeletePhoto,r=e.handleDeletePhotoDialogClose,c=e.photo;return Object(a.jsx)("div",{children:Object(a.jsxs)(me.a,{open:t,onClose:r,"aria-labelledby":"form-dialog-title",children:[Object(a.jsx)(fe.a,{id:"form-dialog-title",children:"Deleting Photo: ".concat(c.name)}),Object(a.jsx)(Oe.a,{children:Object(a.jsx)(xe.a,{children:"Are you sure you would like to delete this photo?"})}),Object(a.jsxs)(pe.a,{children:[Object(a.jsx)(be.a,{onClick:r,children:"Cancel"}),Object(a.jsx)(be.a,{onClick:n,children:"Confirm"})]})]})})},Ye=n(263),qe=n(277),Je=n(256),Ke=n(269),Qe=Object(I.a)((function(e){var t;return{albumTitle:(t={paddingBottom:"20px",fontSize:"1.6rem"},Object(v.a)(t,e.breakpoints.down("xs"),{fontSize:"1.05rem"}),Object(v.a)(t,"@media (max-width:420px)",{fontSize:"0.85rem"}),Object(v.a)(t,"textDecoration","none"),Object(v.a)(t,"color","dddddd"),t),iconButton:{color:"#383838"},formControl:{margin:e.spacing(1),minWidth:180},formControlRemove:{margin:e.spacing(1),minWidth:210},editButton:{}}})),Xe=function(e){var t=e.match,n=Qe(),c=Object(l.g)(),i=de(),o=Object(r.useState)({}),u=Object(b.a)(o,2),h=u[0],m=u[1],O=Object(r.useState)([]),f=Object(b.a)(O,2),g=f[0],v=f[1],w=Object(r.useState)([]),k=Object(b.a)(w,2),y=k[0],C=k[1],S=Object(r.useState)(""),N=Object(b.a)(S,2),E=N[0],L=N[1],T=Object(r.useState)(""),D=Object(b.a)(T,2),I=D[0],B=D[1],F=Object(r.useState)(0),R=Object(b.a)(F,2),_=R[0],M=R[1],H=Object(r.useState)(""),U=Object(b.a)(H,2),W=U[0],z=U[1],V=Object(r.useState)(!1),G=Object(b.a)(V,2),Y=G[0],q=G[1],J=Object(r.useState)(!1),K=Object(b.a)(J,2),Q=K[0],X=K[1],Z=Object(r.useState)(!1),$=Object(b.a)(Z,2),ee=$[0],te=$[1],ne=x(h.urlSmall,h.urlMedium),ae=Object(b.a)(ne,2),re=ae[0],ce=ae[1].blur,ie=function(){var e=Object(j.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get("/api/photos/".concat(t));case 3:return n=e.sent,e.next=6,p.a.get("/api/albums/");case 6:a=e.sent,m(n.data),z(n.data.description),v(n.data.albums),C(a.data.filter((function(e){return!(n.data.albums.filter((function(t){return t._id===e._id})).length>0)}))),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){ie(t.params.id),M(document.getElementById("header").offsetHeight)}),[t.params.id]);var oe=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.delete("/api/photos/".concat(t.params.id));case 3:ie(t.params.id),c.push("/admin/photos"),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),i.openAlert("Error deleting photo",e.t0.response.data.msg),je(),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.put("/api/albums/".concat(E,"/").concat(t.params.id));case 3:L(""),X(!0),ie(t.params.id),setTimeout((function(){return X(!1)}),1e3),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),i.openAlert("Error adding photo to album",e.t0.response.data.msg),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),le=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.delete("/api/albums/".concat(I,"/").concat(t.params.id));case 3:B(""),q(!0),ie(t.params.id),setTimeout((function(){return q(!1)}),1e3),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),i.openAlert("Error removing photo from album",e.t0.response.data.msg),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.patch("/api/photos/".concat(t.params.id),{description:W});case 3:ie(t.params.id),setTimeout((function(){return q(!1)}),1e3),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),i.openAlert("Error updating photo description",e.t0.response.data.msg),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),je=function(){te(!1)};return Object(a.jsxs)("div",{children:[Object(a.jsx)(be.a,{variant:"outlined",component:s.b,to:"/admin/photos",children:"<- Back to all photos"}),Object(a.jsxs)("div",{children:[Object(a.jsx)(A.a,{id:"photo-title",className:n.albumTitle,align:"center",variant:"h5"}),Object(a.jsxs)(Ye.a,{container:!0,className:n.root,spacing:2,children:[Object(a.jsx)(Ye.a,{item:!0,xs:6,children:Object(a.jsx)("img",{style:{width:"100%",maxHeight:.95*window.innerHeight-_,objectFit:"contain",filter:ce?"blur(20px)":"none",transition:ce?"none":"filter 0.3s ease-out"},alt:"temp",src:re})}),Object(a.jsxs)(Ye.a,{item:!0,xs:6,children:[Object(a.jsx)("div",{children:Object(a.jsxs)(Je.a,{className:n.formControl,children:[Object(a.jsx)(qe.a,{htmlFor:"grouped-select",children:"Add photo to album"}),Object(a.jsxs)(Ke.a,{defaultValue:"",id:"grouped-select",onChange:function(e){return L(e.target.value)},children:[Object(a.jsx)(P.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),y.map((function(e){return Object(a.jsx)(P.a,{value:e._id,children:e.name},e._id)}))]})]})}),Object(a.jsx)("div",{children:Object(a.jsx)(be.a,{className:n.editButton,variant:"outlined",disabled:!E,onClick:se,children:"Confirm Add"})}),Q&&Object(a.jsx)(A.a,{children:"PHOTO ADDED"}),Object(a.jsx)("div",{children:Object(a.jsxs)(Je.a,{className:n.formControlRemove,children:[Object(a.jsx)(qe.a,{htmlFor:"grouped-select",children:"Remove photo from album"}),Object(a.jsxs)(Ke.a,{defaultValue:"",id:"grouped-select",onChange:function(e){return B(e.target.value)},children:[Object(a.jsx)(P.a,{value:"",children:Object(a.jsx)("em",{children:"None"})}),g.map((function(e){return Object(a.jsx)(P.a,{value:e._id,children:e.name},e._id)}))]})]})}),Object(a.jsx)("div",{children:Object(a.jsx)(be.a,{variant:"outlined",onClick:le,disabled:!I,children:"Confirm Remove"})}),Y&&Object(a.jsx)(A.a,{children:"PHOTO REMOVED"}),Object(a.jsxs)("div",{children:[Object(a.jsx)(he.a,{style:{width:400,marginBottom:10,marginTop:10},label:"Description",defaultValue:W,value:W,onChange:function(e){return z(e.target.value)}}),Object(a.jsx)(be.a,{className:n.editButton,variant:"outlined",onClick:ue,disabled:W===h.description||!W,children:"Confirm Description Change"})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)(be.a,{style:{marginTop:30},variant:"outlined",color:"secondary",onClick:function(){return te(!0)},children:"Delete Photo"}),Object(a.jsx)(Ge,{photo:h,deletePhotoDialogisOpen:ee,handleDeletePhotoDialogClose:je,handleDeletePhoto:oe})]})]})]})]}),Object(a.jsx)("div",{className:"delete-button"})]})},Ze=n(146),$e=n(265),et=(n(202),n(264)),tt=n(143),nt=n.n(tt),at=n(144),rt=n.n(at),ct=n(276),it=Object(I.a)((function(e){var t;return{loginInput:{width:"100%",paddingBottom:20},sectionTitles:(t={display:"flex",justifyContent:"center",alignItems:"center"},Object(v.a)(t,e.breakpoints.down("xs"),{fontSize:"1.00rem"}),Object(v.a)(t,"fontWeight",300),Object(v.a)(t,"paddingBottom",30),t),parentDiv:{width:300,position:"fixed",top:"45%",left:"50%",webkitTtransform:"translate(-50%, -50%)",transform:"translate(-50%, -50%)"}}})),ot=function(){var e=it(),t=Object(r.useState)(""),n=Object(b.a)(t,2),c=n[0],i=n[1],o=Object(r.useState)(""),s=Object(b.a)(o,2),u=s[0],h=s[1],m=Object(r.useState)(!1),O=Object(b.a)(m,2),x=O[0],f=O[1],g=C(),v=de(),k=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.post("/api/auth",{email:c,password:u});case 3:t=e.sent,w(t.data.token),g.login(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),v.openAlert("Error logging in",e.t0.response.data.errors[0].msg),g.logout();case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();if(g.isAuthenticated)return Object(a.jsx)(l.a,{to:"/admin"});return Object(a.jsx)(r.Fragment,{children:g.isLoading?Object(a.jsx)("div",{}):Object(a.jsxs)("div",{className:e.parentDiv,children:[Object(a.jsx)(A.a,{className:e.sectionTitles,variant:"h5",children:"LOGIN"}),Object(a.jsx)("div",{children:Object(a.jsxs)(Je.a,{className:e.loginInput,variant:"outlined",children:[Object(a.jsx)(qe.a,{htmlFor:"outlined-adornment-password",children:"Email"}),Object(a.jsx)(ct.a,{type:"text",value:c,onChange:function(e){return i(e.target.value)},labelWidth:40})]})}),Object(a.jsx)("div",{children:Object(a.jsxs)(Je.a,{className:e.loginInput,variant:"outlined",children:[Object(a.jsx)(qe.a,{htmlFor:"outlined-adornment-password",children:"Password"}),Object(a.jsx)(ct.a,{type:x?"text":"password",value:u,onChange:function(e){return h(e.target.value)},endAdornment:Object(a.jsx)(et.a,{position:"end",children:Object(a.jsx)(L.a,{"aria-label":"toggle password visibility",onClick:function(){return f(!x)},onMouseDown:function(e){e.preventDefault()},edge:"end",children:x?Object(a.jsx)(nt.a,{}):Object(a.jsx)(rt.a,{})})}),labelWidth:70})]})}),Object(a.jsx)(be.a,{variant:"outlined",onClick:k,children:"LOGIN"})]})})},st=n(149),lt=function(e){var t=e.component,n=Object(st.a)(e,["component"]),r=C();return Object(a.jsx)(l.b,Object(O.a)(Object(O.a)({},n),{},{render:function(e){return r.isLoading?void 0:r.isAuthenticated?Object(a.jsx)(t,Object(O.a)({},e)):Object(a.jsx)(l.a,{to:"/login"})}}))},ut=n(145),dt=function(e){Object(ut.a)(e);var t=de(),n=t.isOpen,r=t.alertType,c=t.msg,i=t.closeAlert;return Object(a.jsxs)(me.a,{open:n,"aria-labelledby":"form-dialog-title",maxWidth:"lg",children:[Object(a.jsx)(fe.a,{style:{width:"300px"},id:"form-dialog-title",children:r}),Object(a.jsx)(Oe.a,{dividers:!0,children:Object(a.jsx)(A.a,{gutterBottom:!0,children:c})}),Object(a.jsx)(pe.a,{children:Object(a.jsx)(be.a,{onClick:i,color:"primary",children:"Close"})})]})},jt=function(){console.log=function(){},console.error=function(){};var e=Object(Ze.a)({});return Object(r.useEffect)((function(){document.title="Dylan Montagu Photography"}),[]),Object(a.jsxs)($e.a,{theme:e,children:[Object(a.jsx)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700&display=swap"}),Object(a.jsx)(s.a,{children:Object(a.jsx)(S,{children:Object(a.jsxs)(je,{children:[Object(a.jsx)(dt,{}),Object(a.jsxs)(r.Fragment,{children:[Object(a.jsx)(F,{}),Object(a.jsxs)(l.d,{children:[Object(a.jsx)(l.b,{exact:!0,path:"/",component:g}),Object(a.jsx)(l.b,{exact:!0,path:"/login",component:ot}),Object(a.jsx)(l.b,{exact:!0,path:"/index/:index",component:$}),Object(a.jsx)(l.b,{exact:!0,path:"/portfolio",component:U}),Object(a.jsx)(l.b,{exact:!0,path:"/album/:id",component:V}),Object(a.jsx)(l.b,{exact:!0,path:"/album/:id/:index",component:Z}),Object(a.jsx)(l.b,{exact:!0,path:"/about",component:te}),Object(a.jsx)(lt,{exact:!0,path:"/admin",component:we}),Object(a.jsx)(lt,{exact:!0,path:"/admin/photos",component:Ve}),Object(a.jsx)(lt,{exact:!0,path:"/admin/photos/:id",component:Xe}),Object(a.jsx)(lt,{exact:!0,path:"/admin/album/:id",component:Ue}),Object(a.jsx)(l.b,{render:function(){return Object(a.jsx)(l.a,{to:{pathname:"/"}})}})]})]})]})})})]})};o.a.render(Object(a.jsx)(jt,{}),document.getElementById("root"))}},[[203,1,2]]]);
//# sourceMappingURL=main.80d44909.chunk.js.map